!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}(function(t){function e(e,n){var i,a,o,u=e,r=t(e);function c(t,e){var i=n.html?t.html():t.text();t.data("before")!==i&&e&&t.trigger("change")}function d(t,e){document.execCommand(t,!1,e),r.focus()}function l(t){void 0!==n[t]&&n[t].call(u)}return defaults=t.extend({},t.fn.quickEdit.defaults),r.is("p")&&(defaults.allowReturn=!1),n=t.extend({},defaults,n),a=r.attr("id"),r.data("api"),o=n.html?r.html():r.text(),a||(a="editable"+Math.round(99999*Math.random()),r.attr("id",a)),r.prop("contenteditable",!0).addClass("editable"),r.data("before",o),r.data("ocol",r.css("color")),r.on("change.quickEdit",function(){!function(e){var i=n.html?e.html():e.text(),a={id:e.attr("id"),value:i};if(e.data("before",i),n.onSave)n.onSave.call(e,i);else{var o=e.data("url"),u=e.data("target");if(u){var r=t("input[name='"+u+"']:input");r.length&&(t("input[name='"+u+"']").val(i.replace(/^\s+|\s+$/g,"")),n.onSaved.call(e,i))}else t.ajax({cache:!1,url:o,type:"post",data:a,success:function(t){n.onSaved.call(e,i,t)}})}}(r)}),i=a,r.on("focus."+i,function(t){return c(r,n.submitOnBlur),!1}).on("blur."+i,function(t){return c(r,n.submitOnBlur),!1}).on("keydown."+i,function(e){if(!n.allowReturn&&13===e.keyCode){e.preventDefault();var i=t(this);return c(i),!1}if((e.ctrlKey||e.metaKey)&&83!==e.which){var a=String.fromCharCode(e.which).toLowerCase();switch(a){case"b":return e.preventDefault(),d("bold"),!1;case"i":return e.preventDefault(),d("italic"),!1}}}),l("onInit"),{option:function(t,e){if(!e)return n[t];n[t]=e},destroy:function(){r.each(function(){var e=t(this);l("onDestroy"),e.removeData("plugin_quickEdit")})},applyFormat:d}}t.fn.quickEdit=function(n){if("string"==typeof arguments[0]){var i,a=arguments[0],o=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!t.data(this,"plugin_quickEdit")||"function"!=typeof t.data(this,"plugin_quickEdit")[a])throw new Error("Method "+a+" does not exist on jQuery.");i=t.data(this,"plugin_quickEdit")[a].apply(this,o)}),void 0!==i?i:this}if("object"==typeof n||!n)return this.each(function(){t.data(this,"plugin_quickEdit")||t.data(this,"plugin_quickEdit",new e(this,n))})},t.fn.quickEdit.defaults={allowReturn:!0,submitOnBlur:!0,html:!1,onSave:null,onSaved:function(){}}});
